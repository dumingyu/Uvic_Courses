A = [1 -0.5; 0 0.5];
b = [1; -1];
c = [0.5; 0.5];
d = -1;
de = 0.01;
e = 0.0001;
global tau;
tau = 10;

x1 = 2;
x2 = 2;
X = [x1; x2];


L = 10/tau;
alpha = 0.1;

while L >= e 
x1 = X(1);
x2 = X(2);
z1 = x1 - 0.5*x2 + 1;
z2 = 0.5*x2 - 1;
z3 = 0.5*x1 + 0.5*x2 -1;

g1 = tau*(2*z1*z3^(-1) - 0.5*z3^(-2)*(z1^2 + z2^2)) + 0.5*(de - z3)^(-1);
g2 = tau*((-z1 + z2)*z3^(-1)- 0.5 * (z1^2 + z2^2)*z3^(-2)) + 0.5*(de - z3)^(-1);

h11 = tau*(2 *z3^(-1) - 2*z1*z3^(-2) + 0.5*z3^(-3)*(z1^2 + z2^2)) + 0.25*(de - z3)^(-2);
h12 = tau*(-z3^(-1) - z1*z3^(-2)+ 0.5*z3^(-3)*(z1^2 + z2^2) -0.5*z3^(-2)*(z2 - z1))+ 0.25*(de - z3)^(-2);
h21 = tau*(-z3^(-1) - 0.5*z3^(-2)*(-z1 + z2) - z1*z3^(-2) + 0.5*(z1^2 + z2^2)*z3^(-3))+ 0.25*(de - z3)^(-2);
h22 = tau*(z3^(-1) - z3^(-2)*(-z1 + z2) + 0.5*(z1^2 + z2^2)*z3^(-3))+ 0.25*(de - z3)^(-2);

G = [g1; g2];
H = [h11 h12; h21 h22];

dk = -inv(H)*G;
L = (0.5*G'*inv(H)*G)/10;

u = de - c'*X -d;
%f = (norm(A*X + b,2))^2*(c'*X+d)^(-1);
%F = ta*f - log(-u);

alpha = bt_lsearch(X,dk,'FF','GG');
X = X + alpha*dk;
tau = 10*tau;
end
disp(FF(X)/tau);
