A = [1 -0.5; 0 0.5];
b = [1; -1];
c = [0.5; 0.5];
d = -1;
de = 0.01;
e = 0.001;
global ta;
ta = 1;


%cvx_begin
%variable X(2,1);
%variable m(1,1);
%minimize(m)
%subject to
%de - c'*X - d - m < 0;
%c'*X + d >= 0.01;
%cvx_end

%disp(X);
x1 = 2;
x2 = 2;
X = [x1; x2];

x1 = X(1);
x2 = X(2);
z1 = x1 - 0.5*x2 + 1;
z2 = 0.5*x2 - 1;
z3 = 0.5*x1 + 0.5*x2 -1;

g1 = ta*(2*z1*z3^(-1) - 0.5*z3^(-2)*(z1^2 + z2^2)) + 0.5*(de - z3)^(-1);
g2 = ta*((-z1 + z2)*z3^(-1)- 0.5 * (z1^2 + z2^2)*z3^(-2)) + 0.5*(de - z3)^(-1);

h11 = ta*(2 *z3^(-1) - 2*z1*z3^(-2) + 0.5*z3^(-3)*(z1^2 + z2^2)) + 0.25*(de - z3)^(-2);
h12 = ta*(-z3^(-1) - z1*z3^(-2)+ 0.5*z3^(-3)*(z1^2 + z2^2) -0.5*z3^(-2)*(z2 - z1))+ 0.25*(de - z3)^(-2);
h21 = ta*(-z3^(-1) - 0.5*z3^(-2)*(-z1 + z2) - z1*z3^(-2) + 0.5*(z1^2 + z2^2)*z3^(-3))+ 0.25*(de - z3)^(-2);
h22 = ta*(z3^(-1) - z3^(-2)*(-z1 + z2) + 0.5*(z1^2 + z2^2)*z3^(-3))+ 0.25*(de - z3)^(-2);

G = [g1; g2];
H = [h11 h12; h21 h22];

disp(G);

L = 10;
ro = 0.1;
alpha = 0.01;

while 1/ta >= e 
    
while norm(G,2) >= e
%while L >= e
dk = -inv(H)*G;
L = (0.5*G'*inv(H)*G);

u = de - c'*X -d;
%f = (norm(A*X + b,2))^2*(c'*X+d)^(-1);
%F = ta*f - log(-u);

%alpha = bt_lsearch(X,dk,'FF','GG');




X = X + alpha*dk;
disp(X);

x1 = X(1);
x2 = X(2);
z1 = x1 - 0.5*x2 + 1;
z2 = 0.5*x2 - 1;
z3 = 0.5*x1 + 0.5*x2 -1;

g1 = (2*z1*z3^(-1) - 0.5*z3^(-2)*(z1^2 + z2^2)) + 1.0/ta*0.5*(de - z3)^(-1);
g2 = ((-z1 + z2)*z3^(-1)- 0.5 * (z1^2 + z2^2)*z3^(-2)) + 1.0/ta*0.5*(de - z3)^(-1);

h11 = (2 *z3^(-1) - 2*z1*z3^(-2) + 0.5*z3^(-3)*(z1^2 + z2^2)) + 1.0/ta*0.25*(de - z3)^(-2);
h12 = (-z3^(-1) - z1*z3^(-2)+ 0.5*z3^(-3)*(z1^2 + z2^2) -0.5*z3^(-2)*(z2 - z1))+ 1.0/ta*0.25*(de - z3)^(-2);
h21 = (-z3^(-1) - 0.5*z3^(-2)*(-z1 + z2) - z1*z3^(-2) + 0.5*(z1^2 + z2^2)*z3^(-3))+ 1.0/ta*0.25*(de - z3)^(-2);
h22 = (z3^(-1) - z3^(-2)*(-z1 + z2) + 0.5*(z1^2 + z2^2)*z3^(-3))+ 1.0/ta*0.25*(de - z3)^(-2);

G = [g1; g2];
H = [h11 h12; h21 h22];


end


ta = 10*ta;
end

disp(FF(X));
